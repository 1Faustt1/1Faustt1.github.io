// const informaticsTasks = [
//         {
//             subject: "Информатика",
//             number_of_oge: "1",
//             id: "F8E641",
//             name: "Впишите правильный ответ.",
//             description: "В одной из кодировок Unicode каждый символ кодируется 16 битами.Ученица написала текст (в нём нет лишних пробелов):«Предметы мебели: пуф, стул, диван, кресло, кровать, тумбочка, оттоманка, полукресло, раскладушка».Ученица удалила из списка название одного предмета, а также лишние запятую и пробел – два пробела не должны идти подряд.При этом размер нового предложения в данной кодировке оказался на 20 байт меньше, чем размер исходного предложения. Напишите в ответе удалённое название предмета.",
//             additional_description_table: null,
//             media: "",
//             option: "input",
//             correct_answer: "тумбочка",
//             is_favorite: false,
//             is_solved: false
//         },
//         {
//             subject: "Информатика",
//             number_of_oge: "1",
//             id: "7CB946",
//             name: "Впишите правильный ответ.",
//             description: "В одной из кодировок Unicode каждый символ кодируется 16 битами.Вова написал текст (в нём нет лишних пробелов): «Алый, синий, фуксия, красный, янтарный, оранжевый, фиолетовый,  канареечный, баклажановый – цвета». Ученик вычеркнул из списка название одного цвета. Заодно он вычеркнул ставшие лишними запятую и пробел – два пробела не должны идти подряд.При этом размер нового предложения в данной кодировке оказалсяна 12 байт меньше, чем размер исходного предложения. Напишите в ответе вычеркнутое название цвета.",
//             additional_description_table: null,
//             media: "",
//             option: "input",
//             correct_answer: "алый",
//             is_favorite: false,
//             is_solved: false
//         },
//         {
//             subject: "Информатика",
//             number_of_oge: "1",
//             id: "C0544E",
//             name: "Впишите правильный ответ.",
//             description: "В кодировке Windows-1251 каждый символ кодируется 8 битами.Вова написал текст (в нём нет лишних пробелов): «Вздыхать и думать про себя:Когда же чёрт возьмёт тебя!» Ученик вычеркнул из текста одно слово. Заодно он вычеркнул ставший лишним пробел – два пробела не должны идти подряд.При этом размер нового предложения в данной кодировке оказалсяна 7 байт меньше, чем размер исходного предложения. Напишите в ответе вычеркнутое слово.",
//             additional_description_table: null,
//             media: "",
//             option: "input",
//             correct_answer: "думать",
//             is_favorite: false,
//             is_solved: false
//         },
//         {
//             subject: "Информатика",
//             number_of_oge:"2",
//             id: "c3e44A",
//             name: "Впишите правильный ответ.",
//             description: "Валя шифрует русские слова, записывая вместо каждой буквы её код. Коды букв даны в таблице. АВДОРУ01 011100 111 010001 Некоторые кодовые цепочки можно расшифровать несколькими способами. Например, 00101001 может означать не только УРА, но и УАУ.Даны три кодовые цепочки:01001001010110111111000100110001Найдите среди них ту, которая имеет только одну расшифровку, и запишите в ответе расшифрованное слово.",
//             additional_description_table: [
//                 [
//                     "А",
//                     "В",
//                     "Д",
//                     "О",
//                     "Р",
//                     "У"
//                 ],
//                 [
//                     "01",
//                     "011",
//                     "100",
//                     "111",
//                     "010",
//                     "001"
//                 ]
//             ],
//             media: "",
//             option: "input",
//             correct_answer: "алый",
//             is_favorite: false,
//             is_solved: false
//         }
// ];
//
// const englishTasks = [
//     {
//         subject: "Английский язык",
//         number_of_oge: "38",
//         id: "F8E641",
//         name: "Дайте развернутый ответ.",
//         description: "" +
//             "Task 3. You are going to give a talk about your school. You will have to start in 1.5 minutes and speak for not more than 2 minutes (10–12 sentences). Remember to say:" +
//             "" +
//             "what your typical school day is like;" +
//             "what your favourite subject is, and why;" +
//             "what you like most about your school;" +
//             "what your attitude to your school life is. " +
//             " " +
//             "" +
//             "You have to talk continuously.",
//         additional_description_table: null,
//         media: "",
//         option: "none",
//         correct_answer: "",
//         is_favorite: false,
//         is_solved: false
//     },
//     {
//         subject: "Английский язык",
//         number_of_oge: "12",
//         id: "303746",
//         name: "Установите соответствие и впишите ответ.",
//         description: "" +
//             "Вы проводите информационный поиск в ходе выполнения проектной работы. Определите, в каком из текстов A–F содержатся ответы на интересующие Вас вопросы 1–7. Один из вопросов останется без ответа. Занесите Ваши ответы в таблицу." +
//             "" +
//             " " +
//             "" +
//             "1. " +
//             "What else had to be done to start operating the Channel Tunnel? " +
//             "" +
//             "2. " +
//             "Why didn’t the British support the first project of the Channel Tunnel?" +
//             "" +
//             "3. " +
//             "How many tunnels were actually built? " +
//             "" +
//             "4. " +
//             "What are the safety tips while travelling through the Channel Tunnel?" +
//             "" +
//             "5. " +
//             "What are the possible ways for a passenger to travel through the Channel tunnel? " +
//             "" +
//             "6. " +
//             "Why is the Channel Tunnel considered to be a great engineering achievement?" +
//             "" +
//             "7. " +
//             "What was the most difficult task in constructing the Channel Tunnel?" +
//             "" +
//             "A. " +
//             "The Channel Tunnel (or Chunnel) is a long tunnel between England and France under the English Channel.  The section under the sea is 38 km long and the entire length is 50.5 km. At its lowest point it is 75 metres deep. The Channel Tunnel is the longest undersea tunnel in the world. The tunnel was recognised as one of the ‘Seven Wonders of the Modern World’ by the American Society of Engineers." +
//             "" +
//             "B. " +
//             "For centuries, crossing the English Channel via boat had been considered a miserable task. The windy weather and choppy water made travellers seasick. So, in 1802, French engineer Albert Favier was the first person whoproposed to dig a tunnel under the water of the channel. Favier’s plan was adopted by French leader Napoleon Bonaparte. But the British rejected the plan. They feared that Napoleon wanted to build the tunnel in order to invade England." +
//             "" +
//             "C. " +
//             "At the end of the 20th century the idea was revived. The digging of the Channel Tunnel began simultaneously from the British and the French coasts. The greatest challenge was making sure that both the British side of the tunnel and the French side actually met up in the middle. Special lasers and surveying equipment were used. On December 1, 1990, the meeting of the two sides was officially celebrated. For the first time in history, Great Britain and France were connected." +
//             "" +
//             "D. " +
//             "Although the meeting of the two sides of the service tunnel was a cause for great celebration, it certainly wasn’t the end of the Channel Tunnel building project. Crossover tunnels, land tunnels from the coast to the terminals, electrical systems, fireproof doors, the ventilation system and train tracks all had to be added. Also, large train terminals had to be built at Folkestone in Great Britain and Coquelles in France." +
//             "" +
//             "E. " +
//             "It took 13,000 engineers and technicians to construct the Channel Tunnel. In fact, there are two running tunnels, one each way. Additionally, there is a smaller service tunnel with a crossover in the middle, so in case there’s an emergency, the trains can actually change to either side. It is wrong to call it a tunnel as there are actually three tunnels. The tunnels are about 50 meters below the seabed." +
//             "" +
//             "F. " +
//             "If you want to use the tunnel, you have got a choice. You can either go on a passenger train, the Eurostar, which departs from London, Paris and Brussels city centres. Or you can go on the drive-on service, called the Eurotunnel Shuttle, starting close to the tunnel entrance where you drive your car or truck onto special rail cars." +
//             "" +
//             "Запишите в таблицу выбранные цифры под соответствующими буквами.",
//         additional_description_table: null,
//         media: "",
//         option: "select",
//         correct_answer: "627135",
//         is_favorite: false,
//         is_solved: false
//     },
//     {
//         subject: "Английский язык",
//         number_of_oge: "37",
//         id: "075DF0",
//         name: "Дайте развернутый ответ.",
//         description: "" +
//             "Task 2. You are going to take part in a telephone survey. You have to answer six questions. Give full answers to the questions." +
//             "" +
//             " " +
//             "" +
//             "Remember that you have 40 seconds to answer each question.",
//         additional_description_table: null,
//         media: "https://oge.fipi.ru/docs/8BBD5C99F37898B6402964AB11955663/questions/122837638FFB89424179D39AB75E51F2/img1_1490011893.mp3",
//         option: "none",
//         correct_answer: "",
//         is_favorite: false,
//         is_solved: false
//     },
//     {
//         subject: "Английский язык",
//         number_of_oge:"34",
//         id: "1969B5",
//         name: "Впишите правильный ответ.",
//         description: "Dad made three large cups of the stuff. He took one and drank it. He handed the __________________ cup to Tom. To his surprise the juice tasted really good.",
//         additional_description_table: null,
//         media: "",
//         option: "input",
//         correct_answer: "second",
//         is_favorite: false,
//         is_solved: false
//     }
// ];

// import {tasksDataJson} from "../json/oge/tasks";
//
// const tasksData2 = tasksDataJson

const tasksDataJson = `{
  "tasks": [
    {
      "subject": "Информатика",
      "number_of_oge": "1",
      "id": "F8E641",
      "subject_id": "INF004",
      "name": "Впишите правильный ответ.",
      "description": "В одной из кодировок Unicode каждый символ кодируется 16 битами. Ученица написала текст (в нём нет лишних пробелов): «Предметы мебели: пуф, стул, диван, кресло, кровать, тумбочка, оттоманка, полукресло, раскладушка». Ученица удалила из списка название одного предмета, а также лишние запятую и пробел – два пробела не должны идти подряд. При этом размер нового предложения в данной кодировке оказался на 20 байт меньше, чем размер исходного предложения. Напишите в ответе удалённое название предмета.",
      "additional_description_table": null,
      "media": "",
      "option": "input",
      "correct_answer": "тумбочка",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Информатика",
      "number_of_oge": "1",
      "id": "7CB946",
      "subject_id": "INF004",
      "name": "Впишите правильный ответ.",
      "description": "В одной из кодировок Unicode каждый символ кодируется 16 битами. Вова написал текст (в нём нет лишних пробелов): «Алый, синий, фуксия, красный, янтарный, оранжевый, фиолетовый, канареечный, баклажановый – цвета». Ученик вычеркнул из списка название одного цвета. Заодно он вычеркнул ставшие лишними запятую и пробел – два пробела не должны идти подряд. При этом размер нового предложения в данной кодировке оказался на 12 байт меньше, чем размер исходного предложения. Напишите в ответе вычеркнутое название цвета.",
      "additional_description_table": null,
      "media": "",
      "option": "input",
      "correct_answer": "алый",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Информатика",
      "number_of_oge": "1",
      "id": "C0544E",
      "subject_id": "INF004",
      "name": "Впишите правильный ответ.",
      "description": "В кодировке Windows-1251 каждый символ кодируется 8 битами. Вова написал текст (в нём нет лишних пробелов): «Вздыхать и думать про себя: Когда же чёрт возьмёт тебя!» Ученик вычеркнул из текста одно слово. Заодно он вычеркнул ставший лишним пробел – два пробела не должны идти подряд. При этом размер нового предложения в данной кодировке оказался на 7 байт меньше, чем размер исходного предложения. Напишите в ответе вычеркнутое слово.",
      "additional_description_table": null,
      "media": "",
      "option": "input",
      "correct_answer": "думать",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Информатика",
      "number_of_oge": "2",
      "id": "c3e44A",
      "subject_id": "INF004",
      "name": "Впишите правильный ответ.",
      "description": "Валя шифрует русские слова, записывая вместо каждой буквы её код. Коды букв даны в таблице. АВДОРУ01 011100 111 010001. Некоторые кодовые цепочки можно расшифровать несколькими способами. Например, 00101001 может означать не только УРА, но и УАУ. Даны три кодовые цепочки: 01001001010110111111000100110001. Найдите среди них ту, которая имеет только одну расшифровку, и запишите в ответе расшифрованное слово.",
      "additional_description_table": [
        ["А", "В", "Д", "О", "Р", "У"],
        ["01", "011", "100", "111", "010", "001"]
      ],
      "media": "",
      "option": "input",
      "correct_answer": "алый",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Английский язык",
      "number_of_oge": "38",
      "id": "F8E641",
      "subject_id": "ENG001",
      "name": "Дайте развернутый ответ.",
      "description": "Task 3. You are going to give a talk about your school. You will have to start in 1.5 minutes and speak for not more than 2 minutes (10–12 sentences). Remember to say: what your typical school day is like; what your favourite subject is, and why; what you like most about your school; what your attitude to your school life is. You have to talk continuously.",
      "additional_description_table": null,
      "media": "",
      "option": "none",
      "correct_answer": "",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Английский язык",
      "number_of_oge": "12",
      "id": "303746",
      "subject_id": "ENG001",
      "name": "Установите соответствие и впишите ответ.",
      "description": "Вы проводите информационный поиск в ходе выполнения проектной работы. Определите, в каком из текстов A–F содержатся ответы на интересующие Вас вопросы 1–7. Один из вопросов останется без ответа. Занесите Ваши ответы в таблицу. 1. Why was Vladivostok called so? 2. Who founded the city of Vladivostok? 3. Why has the city quickly become important? 4. What is the climate of the city area? 5. How is it possible to travel to the city? 6. What are the city sights one should visit? 7. What makes Vladivostok buildings unique? A. Vladivostok is located at the same latitude as Russian subtropical sea resort Sochi, but its average annual temperature is nearly 10 degrees lower because of the Siberian Anticyclone. It brings cold winds from Yakutia for much of the winter season. Thus, the winter in Vladivostok is typical of Manchuria – it is cold, clear, and very windy. The snow is rare and, in some years, may not fall at all. The summer is more comfortable, warm, wet, and partly cloudy. B. The first thing that will catch the eye of every tourist right from the platform of the railway station is a unique building of the terminal of the Trans-Siberian Railway. It was built more than a century ago. The sea terminal, located nearby, is also a must-see while going on a tour of Vladivostok. Like other port cities, Vladivostok celebrates the Russian fleet with a number of museums. No doubt, the legendary S-56 submarine which played a great role in the Great Patriotic War is worth visiting. C. The most important city in the Russian Far East, Vladivostok is known as the town of sailors. It was founded about 160 years ago as a small military port. Despite being one of the youngest Russian cities, Vladivostok managed to find its way to the list of the best Russian cities to visit. Its name came from the combination of two words, vladet (meaning “to own”) and vostok (meaning “east”), helping anyone who wants to find Vladivostok on a map. D. The Trans-Siberian Railway was built to connect Asian and European Russia. The final stop on the way, or the first if passengers are travelling west, is in Vladivostok. The city’s strategic location and port led to the fact that Vladivostok has eventually become a large and busy centre in North-East Asia. After its foundation in 1860 as a military post, Vladivostok soon became the centre of international commerce and development. E. Despite the fact that Vladivostok has always been a Russian city, elements of the Chinese and Japanese architecture borrowed from the city’s nearest neighbours can be seen even during a simple walk down the city streets. At the same time, the architecture of Vladivostok leaves no doubt that this is a Russian city. So, this unique place combines a lot of different features. F. As a rule, people prefer to spend a couple of days exploring Vladivostok within their long tour to the Far East, instead of considering the city as an independent holiday destination. They may fly to Vladivostok or go by rail choosing the famous Trans-Siberian express which is very popular with tourists. The Trans-Siberian Railway is the longest railway route in the world. So, going by train to Vladivostok can easily become a journey of a lifetime. Запишите в таблицу выбранные цифры под соответствующими буквами.",
      "additional_description_table": null,
      "media": "",
      "option": "select",
      "correct_answer": "627135",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Английский язык",
      "number_of_oge": "37",
      "id": "075DF0",
      "subject_id": "ENG001",
      "name": "Дайте развернутый ответ.",
      "description": "Task 2. You are going to take part in a telephone survey. You have to answer six questions. Give full answers to the questions. Remember that you have 40 seconds to answer each question.",
      "additional_description_table": null,
      "media": "https://oge.fipi.ru/docs/8BBD5C99F37898B6402964AB11955663/questions/122837638FFB89424179D39AB75E51F2/img1_1490011893.mp3",
      "option": "none",
      "correct_answer": "",
      "is_favorite": false,
      "is_solved": false
    },
    {
      "subject": "Английский язык",
      "number_of_oge": "34",
      "id": "1969B5",
      "subject_id": "ENG001",
      "name": "Впишите правильный ответ.",
      "description": "Dad made three large cups of the stuff. He took one and drank it. He handed the __________________ cup to Tom. To his surprise the juice tasted really good.",
      "additional_description_table": null,
      "media": "",
      "option": "input",
      "correct_answer": "second",
      "is_favorite": false,
      "is_solved": false
    }
  ]
  }`;

function syncWithLS(tasks, elems) {
    // let savedTasks = []
    // try {
    //     savedTasks = JSON.parse(localStorage.getItem('tasks')) ?? []
    // } catch (e) {
    //     console.error(e)
    // }
    // if (!savedTasks) {
    //     return tasks;
    // }
    // // const savedTasks = JSON.parse(localStorage.getItem('tasks'))
    // return [...tasks].map((task, i) => {
    //     const savedTask = savedTasks.find(s => s.id === task.id)
    //     if (savedTask) {
    //         const resultTask = {
    //             ...structuredClone(task),
    //             is_solved: savedTask.is_solved,
    //             is_favorite: savedTask.is_favorite,
    //         }
    //         updateIsSolvedUI(elems[i], resultTask.is_solved)
    //         return resultTask
    //     }
    //     return structuredClone(task)
    // })

    let savedTasks = [];
    try {
        savedTasks = JSON.parse(localStorage.getItem('tasks')) ?? [];
    } catch (e) {
        console.error(e);
    }

    if (!savedTasks.length) return tasks;

    // Перебираем массив карточек и обновляем поля is_solved и is_favorite
    tasks.forEach((task, i) => {
        const savedTask = savedTasks.find(s => s.id === task.id);
        if (savedTask) {
            task.is_solved = savedTask.is_solved;
            task.is_favorite = savedTask.is_favorite;
            // Обновляем UI
            if (elems && elems[i]) {
                updateIsSolvedUI(elems[i], task.is_solved);
            }
        }
    });

    return tasks; // возвращаем сам массив, ссылки остаются те же
}

function updateTask(tasks, task) {
    let savedTasks = []
    try {
        savedTasks = JSON.parse(localStorage.getItem('tasks')) ?? []
    } catch (e) {
        console.error(e)
    }
    const tasksWithoutCurrent = savedTasks.filter(s => s.id !== task.id)

    const taskToSave = {
        id: task.id,
        is_solved: task.is_solved,
        is_favorite: task.is_favorite,
    }

    tasksWithoutCurrent.push(taskToSave)
    localStorage.setItem('tasks', JSON.stringify(tasksWithoutCurrent))
    syncWithLS(tasks, taskStatuses)
    // const savedTasks = JSON.parse(localStorage.getItem('tasks'))
}

function toggleFavorite(tasks, taskIndex, elem) {
    tasks[taskIndex].is_favorite = !tasks[taskIndex].is_favorite;

    let savedTasks = [];
    try {
        savedTasks = JSON.parse(localStorage.getItem('tasks')) ?? [];
    } catch (e) {
        console.error(e);
    }

    const tasksWithoutCurrent = savedTasks.filter(t => t.id !== tasks[taskIndex].id);
    tasksWithoutCurrent.push({
        id: tasks[taskIndex].id,
        is_favorite: tasks[taskIndex].is_favorite,
        is_solved: tasks[taskIndex].is_solved
    });
    localStorage.setItem('tasks', JSON.stringify(tasksWithoutCurrent));

    updateFavoriteUI(elem, tasks[taskIndex].is_favorite);
}

function updateIsSolvedUI(elem, isCorrect) {
    if (isCorrect) {
        elem.textContent = "ВЕРНО"
        elem.style.color = "green"
    } else {
        elem.textContent = "НЕ ВЕРНО"
        elem.style.color = "red"
    }
}

function updateFavoriteUI(elem, isFavorite) {
    const favSVG = elem.querySelector(".main__tasks-card-footer-favorite-svg")
    if (isFavorite) {
        favSVG.setAttribute('fill', 'gold');
    } else {
        favSVG.setAttribute('fill', 'transparent');
    }
}





function idSort(id) {
    currentSubjectTasks = syncWithLS(currentSubjectTasks)
    for (let i = 0; i < currentSubjectTasks.length; i++) {
        if (currentSubjectTasks[i].id === id) {
            return currentSubjectTasks[i]
        }
    }
}

function numberOfSort(number) {
    currentSubjectTasks = syncWithLS(currentSubjectTasks)
    let numberOfSorted = []

    for (let i = 0; i < currentSubjectTasks.length; i++) {
        if (currentSubjectTasks[i].number_of_oge === number) {
            numberOfSorted.push(currentSubjectTasks[i])
        }
    }
    return numberOfSorted
}

function favoriteSort(n) {
    currentSubjectTasks = syncWithLS(currentSubjectTasks)
    let favoriteSorted = []

    for (let i = 0; i < currentSubjectTasks.length; i++) {
        if (n === "all") {
            favoriteSorted.push(currentSubjectTasks[i])
        } else if (n) {
            if (currentSubjectTasks[i].is_favorite === true) {
                favoriteSorted.push(currentSubjectTasks[i])
            }
        } else {
            if (currentSubjectTasks[i].is_favorite === false) {
                favoriteSorted.push(currentSubjectTasks[i])
            }
        }
    }
    return favoriteSorted
}

function solvedSort(n) {
    currentSubjectTasks = syncWithLS(currentSubjectTasks)
    let solvedSorted = []

    for (let i = 0; i < currentSubjectTasks.length; i++) {
        if (n === "all") {
            solvedSorted.push(currentSubjectTasks[i])
        } else if (n) {
            if (currentSubjectTasks[i].is_solved === true) {
                solvedSorted.push(currentSubjectTasks[i])
            }
        } else {
            if (currentSubjectTasks[i].is_solved === false) {
                solvedSorted.push(currentSubjectTasks[i])
            }
        }
    }
    return solvedSorted
}





const tasksData = JSON.parse(tasksDataJson).tasks
const subjectId = new URLSearchParams(window.location.search).get('subjectId') // из ссылки берется параметр subjectId
const subjectTitle = document.getElementById("subjectTitle"); // по id берется заголовок страницы с заданиями
let currentSubjectTasks = tasksData.filter((task) => {
    return task.subject_id === subjectId
})
subjectTitle.innerHTML = currentSubjectTasks[0].subject;

console.log("Функция idSort:")
console.log(idSort("F8E641"))
console.log("\n\n\n")

console.log("Функция numberOfSort:")
console.log(numberOfSort('1'))
console.log("\n\n\n")

console.log("Функция favoriteSort:")
console.log(favoriteSort("true"))
console.log("\n\n\n")

console.log("Функция solvedSort:")
console.log(solvedSort(true))

// switch (subjectId) { // проверятся значение subjectId
//     case "ENG001":
//         tasksData.push(...englishTasks) // отправка заданий в массив
//         subjectTitle.innerHTML = englishTasks[0].subject // смена заголовка на предмет
//         break
//     case "INF004":
//         tasksData.push(...informaticsTasks) // отправка заданий в массив
//         subjectTitle.innerHTML = informaticsTasks[0].subject // смена заголовка на предмет
//         break
//     default:
//         break;
//
// }

const templateCard = document.getElementById("template-card") // по id находится шаблон карточки
const tasksContainer = document.getElementById("tasks-container") // по id находится блок где будут находиться все карточки с заданиями
const tasksCount = currentSubjectTasks.length // информация по количеству заданий

for (let i = 0; i < tasksCount; i++) { // пока все задания не обработаются цикл работает
    const card = templateCard.cloneNode(true) // копируется шаблон карточки
    const input = card.querySelector('.main__tasks-card-input');
    const btn = card.querySelector('.main__tasks-card-btn');

    card.classList.remove("hidden")
    card.childNodes[1].innerHTML = currentSubjectTasks[i].name // вписывается заголовок
    card.childNodes[3].innerHTML = currentSubjectTasks[i].description // вписывается описание (само задание)
    card.childNodes[7].childNodes[1].childNodes[1].innerHTML = "Номер: " + currentSubjectTasks[i].id // вписывается идентификационный номер задания
    tasksContainer.appendChild(card) // готовая карточка добавляется в блок

    if (currentSubjectTasks[i].option === "none") {
        // if (input) input.remove(); если делать ремув, то элементы сбиваются
        if (input) input.style.display = "none"
        btn.textContent = "Изменить статус";
        btn.classList.add("main__tasks-card-btn_none")
    } else if (currentSubjectTasks[i].options === "select") {

    }
}

tasksContainer.removeChild(templateCard) // со страницы убирается шаблон карточки
const taskStatuses = document.getElementsByClassName("main__tasks-card-footer-status-color")

currentSubjectTasks = syncWithLS(currentSubjectTasks, taskStatuses)

const answerInputs = document.getElementsByClassName("main__tasks-card-input") // по классу находим поле ввода карточки
const answerButtons = document.getElementsByClassName("main__tasks-card-btn") // по классу находим кнопку отправки ответа
const favoriteButtons = document.getElementsByClassName("main__tasks-card-footer-favorite")
const inputValues = new Array(answerInputs.length).fill('')

for (let i = 0; i < answerInputs.length; i++) {
    answerInputs[i].addEventListener('input', (event) => { // change изменяется когда input теряет фокус
        inputValues[i] = event.target.value
    })
    answerButtons[i].addEventListener('click', (event) => {
        if (inputValues[i].toLowerCase().trim() === currentSubjectTasks[i].correct_answer.toLowerCase().trim()) {
            updateTask(currentSubjectTasks, {
                ...currentSubjectTasks[i],
                is_solved: true,
            })
            updateIsSolvedUI(taskStatuses[i], true)
        } else {
            updateTask(currentSubjectTasks, {
                ...currentSubjectTasks[i],
                is_solved: false,
            })
            updateIsSolvedUI(taskStatuses[i], false)
        }
    })
}

for (let i = 0; i < favoriteButtons.length; i++) {
    updateFavoriteUI(favoriteButtons[i], currentSubjectTasks[i].is_favorite)
    favoriteButtons[i].addEventListener('click', () => {
        toggleFavorite(currentSubjectTasks, i, favoriteButtons[i])
    });
}

window.addEventListener('beforeunload', () => {
    answerInputs.forEach((answerInput, index) => {
        answerInput.removeEventListener('change')
        answerButtons[index].removeEventListener('click')
    })
    alert("Очистка успешна.")
})

// localStorage.setItem('id', JSON.stringify([tasksDataJson]))